{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/Team%20Integration/%E5%85%89%E5%9C%88%E6%A3%B1%E9%95%9C-AperturePrism/Skills-AutoWebUI/src/components/LanguageSwitcher.tsx"],"sourcesContent":["\"use client\";\n\nimport { useTranslation } from \"@/lib/i18n/context\";\nimport { Languages } from \"lucide-react\";\nimport { useState } from \"react\";\n\nexport default function LanguageSwitcher() {\n  const { language, setLanguage } = useTranslation();\n  const [isOpen, setIsOpen] = useState(false);\n\n  const toggleLanguage = () => {\n    setLanguage(language === \"en\" ? \"zh\" : \"en\");\n    setIsOpen(false);\n  };\n\n  return (\n    <button\n      onClick={toggleLanguage}\n      className=\"glass-button flex items-center gap-2 text-sm font-medium hover:bg-muted/80 transition-all duration-300\"\n      title={language === \"en\" ? \"Switch to Chinese\" : \"Switch to English\"}\n    >\n      <Languages className=\"w-4 h-4\" />\n      <span className=\"uppercase\">{language}</span>\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,GAAG,IAAA,gJAAc;IAChD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IAErC,MAAM,iBAAiB;QACrB,YAAY,aAAa,OAAO,OAAO;QACvC,UAAU;IACZ;IAEA,qBACE,8OAAC;QACC,SAAS;QACT,WAAU;QACV,OAAO,aAAa,OAAO,sBAAsB;;0BAEjD,8OAAC,yNAAS;gBAAC,WAAU;;;;;;0BACrB,8OAAC;gBAAK,WAAU;0BAAa;;;;;;;;;;;;AAGnC"}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///D:/Team%20Integration/%E5%85%89%E5%9C%88%E6%A3%B1%E9%95%9C-AperturePrism/Skills-AutoWebUI/src/app/settings/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport Link from \"next/link\";\nimport { ArrowLeft, Plus, Trash2, Check, Save, Loader2, Server } from \"lucide-react\";\nimport { Config, Provider, ProviderType } from \"@/lib/types\";\nimport { useTranslation } from \"@/lib/i18n/context\";\nimport LanguageSwitcher from \"@/components/LanguageSwitcher\";\n\nexport default function SettingsPage() {\n  const { t } = useTranslation();\n  const [config, setConfig] = useState<Config>({ providers: [], activeProvider: null });\n  const [loading, setLoading] = useState(true);\n  const [isDirty, setIsDirty] = useState(false);\n  const [saving, setSaving] = useState(false);\n\n  useEffect(() => {\n    fetch(\"/api/config\")\n      .then((res) => res.json())\n      .then((data) => {\n        setConfig(data);\n        setLoading(false);\n      });\n  }, []);\n\n  const saveConfig = async (newConfig: Config) => {\n    setSaving(true);\n    try {\n      const res = await fetch(\"/api/config\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(newConfig),\n      });\n      if (res.ok) {\n        setConfig(newConfig);\n        setIsDirty(false);\n      }\n    } catch (error) {\n      console.error(\"Failed to save config\", error);\n    } finally {\n      setSaving(false);\n    }\n  };\n\n  const addProvider = () => {\n    const newProvider: Provider = {\n      id: crypto.randomUUID(),\n      name: \"New Provider\",\n      type: \"openai\",\n      baseUrl: \"https://api.openai.com/v1\",\n      apiKey: \"\",\n      model: \"gpt-4o\",\n    };\n    const newConfig = {\n      ...config,\n      providers: [...config.providers, newProvider],\n      activeProvider: config.activeProvider || newProvider.id,\n    };\n    setConfig(newConfig);\n    setIsDirty(true);\n  };\n\n  const updateProvider = (id: string, updates: Partial<Provider>) => {\n    const newConfig = {\n      ...config,\n      providers: config.providers.map((p) => (p.id === id ? { ...p, ...updates } : p)),\n    };\n    setConfig(newConfig);\n    setIsDirty(true);\n  };\n\n  const removeProvider = (id: string) => {\n    const newConfig = {\n      ...config,\n      providers: config.providers.filter((p) => p.id !== id),\n      activeProvider: config.activeProvider === id ? null : config.activeProvider,\n    };\n    setConfig(newConfig);\n    setIsDirty(true);\n  };\n\n  const setActiveProvider = (id: string) => {\n    const newConfig = { ...config, activeProvider: id };\n    setConfig(newConfig);\n    setIsDirty(true);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\n        <div className=\"flex flex-col items-center gap-4\">\n          <Loader2 className=\"w-8 h-8 animate-spin text-accent\" />\n          <span className=\"text-muted-foreground\">{t.common.loading}</span>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background p-8 font-sans relative overflow-hidden\">\n       {/* Decorative background blobs */}\n       <div className=\"absolute top-[-20%] right-[-10%] w-[500px] h-[500px] rounded-full bg-accent/5 blur-[100px] pointer-events-none\" />\n\n      <div className=\"max-w-4xl mx-auto space-y-8 relative z-10\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-4\">\n            <Link href=\"/\" className=\"glass-button p-2.5 rounded-full hover:bg-muted/50\">\n              <ArrowLeft className=\"w-5 h-5\" />\n            </Link>\n            <h1 className=\"text-apple-headline\">{t.settings.title}</h1>\n          </div>\n          \n          <div className=\"flex items-center gap-4\">\n            <LanguageSwitcher />\n            {isDirty && (\n              <button\n                onClick={() => saveConfig(config)}\n                disabled={saving}\n                className=\"glass-button-primary flex items-center gap-2 animate-apple-fade-in\"\n              >\n                {saving ? <Loader2 className=\"w-4 h-4 animate-spin\" /> : <Save className=\"w-4 h-4\" />}\n                {t.common.save}\n              </button>\n            )}\n          </div>\n        </div>\n\n        <div className=\"space-y-6 animate-apple-fade-in [animation-delay:0.1s]\">\n          <section className=\"space-y-4\">\n            <div className=\"flex items-center justify-between px-2\">\n              <h2 className=\"text-apple-title flex items-center gap-2\">\n                <Server className=\"w-5 h-5 text-accent\" />\n                {t.settings.providers}\n              </h2>\n              <button onClick={addProvider} className=\"glass-button flex items-center gap-2 text-sm text-accent hover:text-accent-foreground\">\n                <Plus className=\"w-4 h-4\" />\n                {t.settings.addProvider}\n              </button>\n            </div>\n\n            <div className=\"grid gap-6\">\n              {config.providers.map((provider) => (\n                <div\n                  key={provider.id}\n                  className={`glass-card relative transition-all duration-300 group ${\n                    config.activeProvider === provider.id \n                      ? \"ring-2 ring-accent shadow-lg shadow-accent/10\" \n                      : \"hover:border-accent/30\"\n                  }`}\n                >\n                  <div className=\"absolute top-4 right-4 flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200\">\n                    <button\n                      onClick={() => setActiveProvider(provider.id)}\n                      className={`p-2 rounded-full transition-all ${\n                        config.activeProvider === provider.id\n                          ? \"bg-accent text-white shadow-md\"\n                          : \"bg-muted text-muted-foreground hover:bg-accent hover:text-white\"\n                      }`}\n                      title={t.settings.actions.setActive}\n                    >\n                      <Check className=\"w-4 h-4\" />\n                    </button>\n                    <button\n                      onClick={() => removeProvider(provider.id)}\n                      className=\"p-2 rounded-full bg-muted text-destructive hover:bg-destructive hover:text-white transition-all\"\n                      title={t.settings.actions.remove}\n                    >\n                      <Trash2 className=\"w-4 h-4\" />\n                    </button>\n                  </div>\n\n                  <div className=\"grid gap-6\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                      <div className=\"space-y-2\">\n                        <label className=\"text-xs font-semibold text-muted-foreground uppercase tracking-wider ml-1\">\n                          {t.settings.fields.name}\n                        </label>\n                        <input\n                          type=\"text\"\n                          value={provider.name}\n                          onChange={(e) => updateProvider(provider.id, { name: e.target.value })}\n                          className=\"glass-input w-full\"\n                          placeholder=\"My Provider\"\n                        />\n                      </div>\n                      <div className=\"space-y-2\">\n                        <label className=\"text-xs font-semibold text-muted-foreground uppercase tracking-wider ml-1\">\n                          {t.settings.fields.type}\n                        </label>\n                        <div className=\"relative\">\n                          <select\n                            value={provider.type}\n                            onChange={(e) =>\n                              updateProvider(provider.id, { type: e.target.value as ProviderType })\n                            }\n                            className=\"glass-input w-full appearance-none cursor-pointer\"\n                          >\n                            <option value=\"openai\">OpenAI</option>\n                            <option value=\"newapi\">NewAPI</option>\n                            <option value=\"openwebui\">OpenWebUI</option>\n                            <option value=\"custom\">Custom</option>\n                          </select>\n                          <div className=\"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none text-muted-foreground\">\n                            <svg width=\"10\" height=\"6\" viewBox=\"0 0 10 6\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                              <path d=\"M1 1L5 5L9 1\" stroke=\"currentColor\" strokeWidth=\"1.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n                            </svg>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"space-y-2\">\n                      <label className=\"text-xs font-semibold text-muted-foreground uppercase tracking-wider ml-1\">\n                        {t.settings.fields.baseUrl}\n                      </label>\n                      <input\n                        type=\"text\"\n                        value={provider.baseUrl}\n                        onChange={(e) => updateProvider(provider.id, { baseUrl: e.target.value })}\n                        className=\"glass-input w-full font-mono text-sm\"\n                        placeholder=\"https://api.openai.com/v1\"\n                      />\n                    </div>\n\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                      <div className=\"space-y-2\">\n                        <label className=\"text-xs font-semibold text-muted-foreground uppercase tracking-wider ml-1\">\n                          {t.settings.fields.apiKey}\n                        </label>\n                        <input\n                          type=\"password\"\n                          value={provider.apiKey}\n                          onChange={(e) => updateProvider(provider.id, { apiKey: e.target.value })}\n                          className=\"glass-input w-full font-mono text-sm\"\n                          placeholder=\"sk-...\"\n                        />\n                      </div>\n\n                      <div className=\"space-y-2\">\n                        <label className=\"text-xs font-semibold text-muted-foreground uppercase tracking-wider ml-1\">\n                          {t.settings.fields.model}\n                        </label>\n                        <input\n                          type=\"text\"\n                          value={provider.model}\n                          onChange={(e) => updateProvider(provider.id, { model: e.target.value })}\n                          className=\"glass-input w-full font-mono text-sm\"\n                          placeholder=\"gpt-4\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n\n              {config.providers.length === 0 && (\n                <div className=\"text-center py-16 glass-card border-dashed border-2 border-border/50 bg-transparent flex flex-col items-center justify-center gap-4\">\n                  <div className=\"p-4 bg-muted rounded-full\">\n                    <Server className=\"w-8 h-8 text-muted-foreground\" />\n                  </div>\n                  <p className=\"text-muted-foreground max-w-sm\">\n                    {t.settings.noProviders}\n                  </p>\n                  <button onClick={addProvider} className=\"glass-button-primary\">\n                    {t.settings.addProvider}\n                  </button>\n                </div>\n              )}\n            </div>\n          </section>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}