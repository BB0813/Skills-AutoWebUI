{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 58, "column": 0}, "map": {"version":3,"sources":["file:///D:/Team%20Integration/%E5%85%89%E5%9C%88%E6%A3%B1%E9%95%9C-AperturePrism/Skills-AutoWebUI/src/app/api/config/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\nimport fs from 'fs';\nimport path from 'path';\n\nconst CONFIG_PATH = path.join(process.cwd(), 'data', 'config.json');\n\n// Helper to ensure config file exists\nconst ensureConfig = () => {\n  if (!fs.existsSync(CONFIG_PATH)) {\n    // Check if data directory exists\n    const dataDir = path.dirname(CONFIG_PATH);\n    if (!fs.existsSync(dataDir)) {\n        fs.mkdirSync(dataDir, { recursive: true });\n    }\n    \n    const initialConfig = {\n      providers: [],\n      activeProvider: null\n    };\n    fs.writeFileSync(CONFIG_PATH, JSON.stringify(initialConfig, null, 2));\n    return initialConfig;\n  }\n  return JSON.parse(fs.readFileSync(CONFIG_PATH, 'utf-8'));\n};\n\nexport async function GET() {\n  try {\n    const config = ensureConfig();\n    return NextResponse.json(config);\n  } catch (error) {\n    return NextResponse.json({ error: 'Failed to read config' }, { status: 500 });\n  }\n}\n\nexport async function POST(request: Request) {\n  try {\n    const body = await request.json();\n    // Ensure data directory exists\n    const dataDir = path.dirname(CONFIG_PATH);\n    if (!fs.existsSync(dataDir)) {\n        fs.mkdirSync(dataDir, { recursive: true });\n    }\n    fs.writeFileSync(CONFIG_PATH, JSON.stringify(body, null, 2));\n    return NextResponse.json({ success: true, config: body });\n  } catch (error) {\n    return NextResponse.json({ error: 'Failed to save config' }, { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAEA,MAAM,cAAc,4GAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,QAAQ;AAErD,sCAAsC;AACtC,MAAM,eAAe;IACnB,IAAI,CAAC,wGAAE,CAAC,UAAU,CAAC,cAAc;QAC/B,iCAAiC;QACjC,MAAM,UAAU,4GAAI,CAAC,OAAO,CAAC;QAC7B,IAAI,CAAC,wGAAE,CAAC,UAAU,CAAC,UAAU;YACzB,wGAAE,CAAC,SAAS,CAAC,SAAS;gBAAE,WAAW;YAAK;QAC5C;QAEA,MAAM,gBAAgB;YACpB,WAAW,EAAE;YACb,gBAAgB;QAClB;QACA,wGAAE,CAAC,aAAa,CAAC,aAAa,KAAK,SAAS,CAAC,eAAe,MAAM;QAClE,OAAO;IACT;IACA,OAAO,KAAK,KAAK,CAAC,wGAAE,CAAC,YAAY,CAAC,aAAa;AACjD;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,SAAS;QACf,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF;AAEO,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,+BAA+B;QAC/B,MAAM,UAAU,4GAAI,CAAC,OAAO,CAAC;QAC7B,IAAI,CAAC,wGAAE,CAAC,UAAU,CAAC,UAAU;YACzB,wGAAE,CAAC,SAAS,CAAC,SAAS;gBAAE,WAAW;YAAK;QAC5C;QACA,wGAAE,CAAC,aAAa,CAAC,aAAa,KAAK,SAAS,CAAC,MAAM,MAAM;QACzD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,QAAQ;QAAK;IACzD,EAAE,OAAO,OAAO;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC7E;AACF"}}]
}